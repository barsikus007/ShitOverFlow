var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(a){return a.raw=a};$jscomp.createTemplateTagFirstArgWithRaw=function(a,c){a.raw=c;return a};function addChecker(){var a=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(a).forEach(function(c){c.addEventListener("submit",function(d){c.checkValidity()||(d.preventDefault(),d.stopPropagation());c.classList.add("was-validated")},!1)})}addChecker();
Date.prototype.format=function(a){var c=this.getFullYear().toString().substring(2),d=this.getMonth()+1,g=10>d?"0"+d:d,b=this.getDate();b=10>b?"0"+b:b;var e=this.getHours();e=10>e?"0"+e:e;var f=this.getMinutes();f=10>f?"0"+f:f;var h=this.getSeconds(),k=10>h?"0"+h:h;a=a.replace(/%Y/i,c);a=a.replace(/%M/i,g);a=a.replace(/%d/i,b);a=a.replace(/%HH/i,e);a=a.replace(/%H/i,e);a=a.replace(/%MM/i,f);a=a.replace(/%m/i,f);a=a.replace(/%SS/i,k);a=a.replace(/%S/i,h);a=a.replace(/%b/i,"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")[d-
1]);return a=a.replace(/%B/i,"January February March April May June July August September October November December".split(" ")[d-1])};
function addComments(a,c){fetch("/api/v1/"+a+"/"+c+"/comments").then(function(d){return d.json()}).then(function(d){d=d.comments.slice(5);var g=document.querySelector("#"+a+"-"+c+" .comments-block");d.forEach(function(b){var e=0;null!=b.score_data&&(e=1*b.score_data+-1*!b.score_data);var f=new Date(b.created_at);b='<hr>\n                <div class="comment row d-flex justify-content-center comment-vote pb-3"\n                     id="comment-'+b.id+'">\n                    <div class="col-1">\n                        <div class="comment-vote">\n                            <div class="row">\n                                <button class="'+
(1===e?"upvote ":-1===e?"unclickable ":"")+"arrow-up\" onclick=\"vote('comment', "+b.id+", 'upvote'"+(1===e?", true":"")+')">\n                                    <svg class="svg-icon iconArrowUpLg"\n                                         aria-hidden="true" width="18" height="18" viewBox="0 0 36 36">\n                                        <path d="M2 26h32L18 10 2 26z"></path>\n                                    </svg>\n                                </button>\n                            </div>\n\n                            <div class="row d-flex justify-content-center vote-count comment-vote">'+
b.score+'</div>\n\n                            <div class="row">\n                                <button class="'+(-1===e?"downvote ":1===e?"unclickable ":"")+"arrow-down\" onclick=\"vote('comment', "+b.id+", 'downvote'"+(-1===e?", true":"")+')">\n                                    <svg class="m0 svg-icon iconArrowDownLg"\n                                         aria-hidden="true" width="18" height="18" viewBox="0 0 36 36">\n                                        <path d="M2 10h32L18 26 2 10z"></path>\n                                    </svg>\n                                </button>\n                            </div>\n\n                        </div>\n                    </div>\n\n                    <div class="col-11 comment-text text-break">\n                        <span>'+
b.body+'</span>\n                        <span class="fine-text"\n                              title="'+f.format("%H:%M:%S %d.%m.%Y")+'">\u2013 '+b.author+" "+f.format("%b %d '%y at %H:%M")+"</span>\n                    </div>\n                </div>";g.insertAdjacentHTML("beforeend",b)});document.querySelector("#"+a+"-"+c+" .comment-button-load").remove()})}
function vote(a,c,d,g){g=void 0===g?!1:g;fetch("/api/v1/"+a+"/"+c+"/"+d+(g?"/undo":""),{method:"POST"}).then(function(b){return b.json()}).then(function(b){if(b.success){b=document.querySelector("#"+a+"-"+c+" button.arrow-up");var e=+document.querySelector("#"+a+"-"+c+" div.vote-count").innerHTML,f=document.querySelector("#"+a+"-"+c+" button.arrow-down");if(g)if("upvote"===d){b.classList.remove("upvote");var h=b.getAttribute("onclick");b.setAttribute("onclick",h.slice(0,-7)+")");f.classList.remove("unclickable");
document.querySelector("#"+a+"-"+c+" div.vote-count").innerHTML=e-1}else f.classList.remove("downvote"),h=f.getAttribute("onclick"),f.setAttribute("onclick",h.slice(0,-7)+")"),b.classList.remove("unclickable"),document.querySelector("#"+a+"-"+c+" div.vote-count").innerHTML=e+1;else"upvote"===d?(b.classList.add("upvote"),h=b.getAttribute("onclick"),b.setAttribute("onclick",h.slice(0,-1)+", true)"),f.classList.add("unclickable"),document.querySelector("#"+a+"-"+c+" div.vote-count").innerHTML=e+1):(f.classList.add("downvote"),
h=f.getAttribute("onclick"),f.setAttribute("onclick",h.slice(0,-1)+", true)"),b.classList.add("unclickable"),document.querySelector("#"+a+"-"+c+" div.vote-count").innerHTML=e-1)}});return!1}
function commentSendPreview(a,c){document.querySelector("#"+a+"-"+c+" div.comment-button").innerHTML='<form name="create-comment" class="needs-validation" novalidate>\n    <div class="row form-floating">\n        <div class="col-sm-6">\n            <input type="text" name="comment" class="form-control" placeholder="Comment" required>\n            <div class="invalid-feedback">Please choose your name (3-64 symbols)</div>\n        </div>\n        <div class="col-sm">\n            <input type="text" name="name" class="form-control" placeholder="Name" required>\n            <div class="invalid-feedback">Please specify comment</div>\n        </div>\n        <div class="col-sm">\n            <button type="submit" class="btn btn-primary button-send" onclick="commentPush(\''+a+
"', "+c+')">Add comment</button>\n        </div>\n    </div>\n </form>';addChecker()}function commentPush(a,c){var d=document.forms["create-comment"],g=d.elements.comment.value,b=d.elements.name.value;if(!g||!b||2>b.length||64<b.length||3>g.length)return!1;d.classList.add("was-validated");fetch("/api/v1/"+a+"/"+c+"/comments/add",{method:"POST",body:'{"author": "'+b+'", "body": "'+g+'"}'}).then(function(e){return e.json()}).then(function(){return window.location.reload()});return!1};